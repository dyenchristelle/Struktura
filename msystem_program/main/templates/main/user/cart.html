{% load static %}
{% load humanize %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Shopping Cart | Struktura</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="{% static 'main/css/user/cart.css' %}">
</head>

<header>
    <a class="home-link" href="{% url 'home_user' %}"><i class="fa-solid fa-house home-icon"></i></a>
    <h1>Shopping Cart</h1>
    <p>Review and manage your selected items.</p>
</header>

<body>
    <div class="cart-container">
        <!-- Cart Items -->
        <div class="cart-items">
            {% if cart_items %}
            {% for cart in cart_items %}
            <div class="cart-item"
                data-cart-id="{{ cart.cart_id }}"
                data-product-id="{{ cart.item_id.item_id }}"
                data-product-price="{{ cart.item_id.item_price }}">

                <div class="item-image">
                    {% if cart.item_id.item_image %}
                        <img src="{{ cart.item_id.item_image.url }}" alt="{{ cart.item_id.item_name }}" class="product-img-cart">
                    {% else %}
                        <img src="{% static 'main/css/admin/pics/default.jpg' %}" alt="No image" class="product-img-cart">
                    {% endif %}
                </div>

                <div class="item-details">
                    <h3 class="product-name-cart">{{ cart.item_id.item_name }}</h3>
                    <p class="product-price-cart">₱{{ cart.item_id.item_price|intcomma }}</p>
                </div>

                <div class="item-quantity">
                    <button class="quantity-btn" onclick="changeQuantity(this, -1)">-</button>
                    
                    <input type="number"
                        class="quantity-input"
                        value="{{ cart.order_quantity }}"
                        min="1"
                        onchange="updateSubtotal(this)">
                    
                    <button class="quantity-btn" onclick="changeQuantity(this, 1)">+</button>
                </div>

                <div class="item-subtotal">
                    <p class="subtotal-price">₱{{ cart.subtotal|floatformat:2 }}</p>
                </div>

                <div class="item-remove">
                    <button class="remove-btn" onclick="removeItem(this)">
                        <i class="fa-solid fa-trash"></i>
                    </button>
                </div>

            </div>
            {% endfor %}
            {% else %}
                <p class="no-items">Your cart is empty.</p>
            {% endif %}
</div>

        <!-- Cart Summary -->
        <div class="cart-summary">
            <h3>Cart Summary</h3>
            <div class="summary-row">
                <span>Subtotal:</span>
                <span id="cart-subtotal">₱9,996.00</span>
            </div>
            <div class="summary-row">
                <span>Shipping:</span>
                <span>₱0.00</span>
            </div>
            <div class="summary-row total">
                <span>Total:</span>
                <span id="cart-total">₱9,996.00</span>
            </div>
            <button class="checkout-btn">Proceed to Checkout</button>
        </div>

        <!-- If Empty -->
        <p class="no-items" style="display: none;">Your cart is empty.</p>
    </div>
</div>
    <footer>
        <section class="container2">
            <div class="copyright">
                <p>© 2025 Struktura Furniture Shop. All rights reserved.</p>
            </div>
        </section>
    </footer>

    <script src="{% static 'main/js/user/user-script.js' %}"></script>
</body>
</html>